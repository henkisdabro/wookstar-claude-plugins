<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>HTML Email Preview</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: linear-gradient(135deg, #2d2d2d 0%, #4a4a4a 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .page-title {
      color: rgba(255,255,255,0.9);
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 16px;
      letter-spacing: 0.5px;
    }

    .page-title span {
      background: rgba(255,255,255,0.2);
      padding: 6px 12px;
      border-radius: 6px;
    }

    .email-container {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      width: 100%;
      max-width: 720px;
      overflow: hidden;
    }

    .recipient-bar, .subject-bar {
      background: #fafafa;
      padding: 16px 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .recipient-content, .subject-content {
      flex: 1;
    }

    .recipient-label, .subject-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #999;
      margin-bottom: 4px;
    }

    .recipient-text, .subject-text {
      font-size: 15px;
      color: #333;
      font-weight: 500;
    }

    .hidden { display: none; }

    .copy-btn {
      background: #f0f0f0;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 8px 12px;
      font-size: 12px;
      color: #666;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .copy-btn:hover {
      background: #e8e8e8;
      color: #333;
    }

    .copy-btn.copied {
      background: #d4edda;
      border-color: #c3e6cb;
      color: #155724;
    }

    .email-body-wrapper {
      position: relative;
      padding: 20px;
    }

    .email-body-header {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 12px;
    }

    .email-body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 13px;
      line-height: 19.5px;
      color: rgb(34, 34, 34);
    }

    .email-body ul, .email-body ol {
      margin: 8px 0;
      padding-left: 28px;
    }

    .email-body li {
      margin-bottom: 2px;
    }

    .email-body blockquote.gmail_quote {
      margin: 0px 0px 0px 0.8ex;
      border-left: 1px solid rgb(204, 204, 204);
      padding-left: 1ex;
    }

    .email-body a {
      color: rgb(17, 85, 204);
    }

    .gmail-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .gmail-btn-primary {
      background: #1a73e8;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 7px 14px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .gmail-btn-primary:hover {
      background: #1557b0;
    }

    .gmail-btn-primary:disabled {
      opacity: 0.7;
      cursor: wait;
    }

    .gmail-btn-primary.copied {
      background: #188038;
    }

    .gmail-btn-secondary {
      background: rgba(255,255,255,0.15);
      color: rgba(255,255,255,0.85);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .gmail-btn-secondary:hover {
      background: rgba(255,255,255,0.25);
    }

    .gmail-btn-secondary:disabled {
      opacity: 0.7;
      cursor: wait;
    }

    .gmail-btn-secondary.copied {
      background: rgba(24,128,56,0.6);
      border-color: rgba(24,128,56,0.8);
      color: #fff;
    }

    .gmail-actions-hint {
      font-size: 10px;
      color: rgba(255,255,255,0.5);
      width: 100%;
      text-align: center;
    }
  </style>
</head>
<body>

<div class="page-title"><span>HTML Email Preview</span></div>

<div class="gmail-actions">
  <button class="gmail-btn-primary" onclick="composeInGmail(this)">Compose in Gmail</button>
  <button class="gmail-btn-secondary" onclick="openGmailInbox(this)">Open Gmail Inbox</button>
  <button class="gmail-btn-secondary" onclick="openInEmailClient(this)">Open in Email Client</button>
  <div class="gmail-actions-hint">All buttons copy the formatted body to clipboard. Paste with Ctrl+V.</div>
</div>

<div class="email-container">
  <div class="recipient-bar">
    <div class="recipient-content">
      <div class="recipient-label">To</div>
      <div class="recipient-text" id="to">[RECIPIENT EMAIL]</div>
    </div>
    <button class="copy-btn" onclick="copyField('to', this)">Copy</button>
  </div>

  <div class="recipient-bar hidden" id="cc-bar">
    <div class="recipient-content">
      <div class="recipient-label">CC</div>
      <div class="recipient-text" id="cc"></div>
    </div>
    <button class="copy-btn" onclick="copyField('cc', this)">Copy</button>
  </div>

  <div class="recipient-bar hidden" id="bcc-bar">
    <div class="recipient-content">
      <div class="recipient-label">BCC</div>
      <div class="recipient-text" id="bcc"></div>
    </div>
    <button class="copy-btn" onclick="copyField('bcc', this)">Copy</button>
  </div>

  <div class="subject-bar">
    <div class="subject-content">
      <div class="subject-label">Subject</div>
      <div class="subject-text" id="subject">[SUBJECT LINE]</div>
    </div>
    <button class="copy-btn" onclick="copySubject(this)">Copy</button>
  </div>

  <div class="email-body-wrapper">
    <div class="email-body-header">
      <button class="copy-btn" onclick="copyBody(this)">Copy Body</button>
    </div>
    <div class="email-body" id="body">Hi [NAME],
<br><br>
[OPENING PARAGRAPH]
<br><br>
[BODY PARAGRAPH]
<br><br>
[CLOSING PARAGRAPH]
<br><br>
[SIGN-OFF],<br>
Henrik
    </div>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var cc = document.getElementById('cc');
  if (cc && cc.innerText.trim()) {
    document.getElementById('cc-bar').classList.remove('hidden');
  }
  var bcc = document.getElementById('bcc');
  if (bcc && bcc.innerText.trim()) {
    document.getElementById('bcc-bar').classList.remove('hidden');
  }
});

function copyBodyAsHTML() {
  var body = document.getElementById('body');
  var sel = window.getSelection();
  var range = document.createRange();
  range.selectNodeContents(body);
  sel.removeAllRanges();
  sel.addRange(range);
  var ok = document.execCommand('copy');
  sel.removeAllRanges();
  return ok;
}

function copyField(fieldId, btn) {
  var text = document.getElementById(fieldId).innerText.trim();
  navigator.clipboard.writeText(text);
  btn.textContent = 'Copied!';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Copy';
    btn.classList.remove('copied');
  }, 2000);
}

function copySubject(btn) {
  var subject = document.getElementById('subject').innerText;
  navigator.clipboard.writeText(subject);
  btn.textContent = 'Copied!';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Copy';
    btn.classList.remove('copied');
  }, 2000);
}

function copyBody(btn) {
  var body = document.getElementById('body');
  var selection = window.getSelection();
  var range = document.createRange();
  range.selectNodeContents(body);
  selection.removeAllRanges();
  selection.addRange(range);
  document.execCommand('copy');
  selection.removeAllRanges();
  btn.textContent = 'Copied!';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Copy Body';
    btn.classList.remove('copied');
  }, 2000);
}

function composeInGmail(btn) {
  btn.disabled = true;
  btn.textContent = 'Copying...';

  var ok = copyBodyAsHTML();
  if (!ok) { btn.textContent = 'Copy failed'; btn.disabled = false; return; }


  var to = document.getElementById('to').innerText.trim();
  var subject = document.getElementById('subject').innerText.trim();
  var cc = document.getElementById('cc') ? document.getElementById('cc').innerText.trim() : '';
  var bcc = document.getElementById('bcc') ? document.getElementById('bcc').innerText.trim() : '';

  var url = new URL('https://mail.google.com/mail/');
  url.searchParams.set('view', 'cm');
  url.searchParams.set('tf', '1');
  url.searchParams.set('to', to);
  url.searchParams.set('su', subject);
  if (cc) url.searchParams.set('cc', cc);
  if (bcc) url.searchParams.set('bcc', bcc);

  window.open(url.toString(), '_blank');

  btn.textContent = 'Copied! Opening Gmail...';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Compose in Gmail';
    btn.classList.remove('copied');
    btn.disabled = false;
  }, 3000);
}

function openGmailInbox(btn) {
  btn.disabled = true;
  btn.textContent = 'Copying...';

  var ok = copyBodyAsHTML();
  if (!ok) { btn.textContent = 'Copy failed'; btn.disabled = false; return; }


  window.open('https://mail.google.com/mail/#inbox?compose=new', '_blank');

  btn.textContent = 'Copied! Opening Gmail...';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Open Gmail Inbox';
    btn.classList.remove('copied');
    btn.disabled = false;
  }, 3000);
}

function openInEmailClient(btn) {
  btn.disabled = true;
  btn.textContent = 'Copying...';

  var ok = copyBodyAsHTML();
  if (!ok) { btn.textContent = 'Copy failed'; btn.disabled = false; return; }


  var to = document.getElementById('to').innerText.trim();
  var subject = document.getElementById('subject').innerText.trim();
  var cc = document.getElementById('cc') ? document.getElementById('cc').innerText.trim() : '';
  var bcc = document.getElementById('bcc') ? document.getElementById('bcc').innerText.trim() : '';

  var mailto = 'mailto:' + to + '?subject=' + encodeURIComponent(subject);
  if (cc) mailto += '&cc=' + cc;
  if (bcc) mailto += '&bcc=' + bcc;

  var a = document.createElement('a');
  a.href = mailto;
  a.click();

  btn.textContent = 'Copied! Opening...';
  btn.classList.add('copied');
  setTimeout(function() {
    btn.textContent = 'Open in Email Client';
    btn.classList.remove('copied');
    btn.disabled = false;
  }, 3000);
}
</script>

</body>
</html>
